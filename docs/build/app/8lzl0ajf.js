/*! Built with http://stenciljs.com */
const{h:t}=window.App;class e{componentDidLoad(){this.addIntersectionObserver()}componentDidUnload(){this.removeIntersectionObserver()}componentWillUpdate(){this.src!==this.oldSrc&&this.addIntersectionObserver(),this.oldSrc=this.src}handleImage(){const t=this.image;t.setAttribute("src",t.getAttribute("data-src")||""),t.onload=(()=>{t.removeAttribute("data-src"),this.lazyImgloaded.emit(t)})}addIntersectionObserver(){this.src&&("IntersectionObserver"in window?(this.io=new IntersectionObserver(t=>{t[0].isIntersecting&&(this.handleImage(),this.removeIntersectionObserver())}),this.io.observe(this.image)):this.handleImage())}removeIntersectionObserver(){this.io&&(this.io.disconnect(),this.io=null)}render(){return t("img",{ref:t=>this.image=t,"data-src":this.src,alt:this.alt,width:this.width})}static get is(){return"lazy-img"}static get properties(){return{alt:{type:String,attr:"alt"},el:{elementRef:!0},oldSrc:{state:!0},src:{type:String,attr:"src"},width:{type:Number,attr:"width"}}}static get events(){return[{name:"lazyImgloaded",method:"lazyImgloaded",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return":host{display:block}img{max-width:100%}"}}export{e as LazyImg};